{% extends 'public.html.twig' %}

{% block meta_description %}
    <meta name="description" content="Die exedra ist eine Plattform f체r ehrliche und best채ndige Partnerschaften.">
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block content %}

    <!-- Start Main Team Area  -->
    <div class="main-content">

        <!-- Start Team-Style-Default Style-Four Area  -->
        <div class="rainbow-team-area rainbow-section-gap">
            <div class="container">
                <div class="row mb--20">
                    <div class="col-lg-12">
                        <div class="section-title text-center" data-sal="slide-up" data-sal-duration="700" data-sal-delay="100">
                            <h2 class="page-title w-500 mt--50 mb--20">team</h2>
                            <p class="description b1">Die exedra ist eine Plattform f체r ehrliche und best채ndige Partnerschaften</p>
                        </div>
                    </div>
                </div>

                <div class="category-filter mb-4 text-center">
                    <ul class="list-inline d-flex justify-content-center flex-wrap gap-4">
                        <li class="list-inline-item">
                            <a href="{{ path('homepage_team') }}" class="btn-default btn-border {{ selectedCategory == 0 ? 'active' : '' }}">Alle Mitarbeiter</a>
                        </li>
                        {% for category in categories %}
                            <li class="list-inline-item">
                                <a href="{{ path('homepage_team', {'category': category.id}) }}"
                                   class="btn-default btn-border {{ selectedCategory == category.id ? 'active' : '' }}">
                                    {{ category.name }}
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="row row--15">
                    {% for teamMember in teamMembers %}
                        {% set fullName = teamMember.firstname ~ ' ' ~ teamMember.lastname %}
                        {% set imagePath2 = teamMember.image2 ? '/media/employees/' ~ teamMember.image2 : '/assets/images/users/dummy_user_avatar.jpg' %}
                        {% set vCardPath = '/media/employee_vcards/' ~ teamMember.vcard %}
                        <div class="col-lg-3 col-md-6 col-sm-6 col-12 mt--30">
                            <a href="#" class="square-category"
                                {% set employeePhoto = employee_photo(teamMember) %}
                                {% if employeePhoto is not null and employeePhoto is not empty %}
                                    {% set imagePath = employeePhoto %}
                                    style="background-image: url('{{ imagePath | imagine_filter('user_avatar_512') }}');"
                                {% else %}
                                    {% set imagePath = asset('assets/images/users/dummy_user_avatar.jpg') %}
                                    style="background-image: url('{{ imagePath }}');"
                                {% endif %}
                                data-bs-toggle="modal" data-bs-target="#teamMemberModal-{{ teamMember.id }}">
                                <div class="square-txt-team">
                                    <span>{{ fullName }}</span>
                                    <i class="mdi mdi-chevron-right"></i>
                                </div>
                            </a>
                            {# Modal for team-member details #}
                            <div class="modal fade modal-inverse" id="teamMemberModal-{{ teamMember.id }}" tabindex="-1" aria-labelledby="teamMemberModalLabel-{{ teamMember.id }}" aria-hidden="true">
                                <div class="modal-dialog modal-lg modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-body p-0">
                                            <div class="row g-0">
                                                {# Left Section: Image fills the entire area with no padding #}
                                                <div class="col-md-6 p-0">
                                                    <img src="{{ absolute_url(asset(imagePath2)) }}" alt="{{ fullName }}" class="img-fluid w-100 h-100" style="object-fit: cover;">
                                                </div>
                                                {# Right Section: Details #}
                                                <div class="col-md-6 p-4">
                                                    <div class="text-end">
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <h3 class="modal-title" id="teamMemberModalLabel-{{ teamMember.id }}">{{ fullName }}</h3>
                                                    <h6 class="subtitle">{{ teamMember.position }}</h6>
                                                    <p>{{ teamMember.description|e('html')|nl2br|raw }}</p>
                                                    <p class="link-hover-white mb--0">
                                                        <a href="tel:{{ teamMember.phone|replace({' ': ''}) }}">
                                                            <i class="mdi mdi-phone"></i>
                                                            {{ teamMember.phone }}
                                                        </a>
                                                    </p>
                                                    <p class="link-hover-white mb--0">
                                                        <a href="mailto:{{ teamMember.email }}">
                                                            <i class="mdi mdi-email"></i>
                                                            {{ teamMember.email }}
                                                        </a>
                                                    </p>
                                                    {% if teamMember.vcard %}
                                                        <p class="link-hover-white mb--20">
                                                            <a href="{{ vCardPath }}">
                                                                <i class="mdi mdi-account-outline"></i>
                                                                vCard herunterladen
                                                            </a>
                                                        </p>
                                                    {% endif %}
                                                    <div class="d-flex flex-wrap gap-3">
                                                        {% if teamMember.facebook %}
                                                            <a href="{{ teamMember.facebook }}" class="avatar-sm d-block" target="_blank">
                                                                <span class="avatar-title rounded-circle fs-16 bg-light text-dark shadow">
                                                                    <i class="ri-facebook-fill"></i>
                                                                </span>
                                                            </a>
                                                        {% endif %}
                                                        {% if teamMember.linkedin %}
                                                            <a href="{{ teamMember.linkedin }}" class="avatar-sm d-block" target="_blank">
                                                                <span class="avatar-title rounded-circle fs-16 bg-light text-dark shadow">
                                                                    <i class="ri-linkedin-fill"></i>
                                                                </span>
                                                            </a>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    {% endfor %}
                </div>

            </div>
        </div>
        <!-- End Team-Style-Default Style-Four Area  -->
    </div>
    <!-- End Main Team Area  -->

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!--homepage init -->
    <script src="{{ asset('assets/js/pages/homepage.init.js') }}"></script>
{% endblock %}
